@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap');

:root {
  --bg-dark: #1A1231;
  --primary-text: #e0e0ff;
  --secondary-text: #a9a3c2;
  --panel-bg: rgba(43, 31, 88, 0.6); /* Increased opacity for better visibility */
  --border-color: rgba(142, 68, 173, 0.4);
  --accent-glow: #00f260;
  --button-purple: #3A0CA3;
  --gradient-line: #C77DFF;
  --font-family: 'Poppins', sans-serif;
  --bg-sidebar: rgba(26, 18, 49, 0.85); /* Increased opacity for better visibility */
}

body {
  margin: 0;
  font-family: var(--font-family);
  background-color: var(--bg-dark);
  color: var(--primary-text);
  overflow: hidden; /* Ensure no unwanted scrollbars */
}

/* --- Full-width Two-Column Layout --- */
.viz-container {
  display: flex;
  min-height: 100vh;
  width: 100%;
  position: relative;
}

/* Main content takes roughly 2/3 of the space */
.viz-main-content {
  flex: 2; 
  display: flex;
  flex-direction: column;
  padding: 2rem;
  box-sizing: border-box;
  overflow-y: auto; /* Allow scrolling if content overflows */
}

/* Sidebar takes roughly 1/3 of the space */
.viz-sidebar {
  flex: 1; 
  padding: 2rem;
  padding-top: 4rem; /* More padding at the top to align with main title */
  box-sizing: border-box;
  background: var(--bg-sidebar);
  border-left: 1px solid var(--border-color);
  overflow-y: auto; /* Allow scrolling if content overflows */
}

.page-title {
  font-size: 3.75rem;
  font-weight: 700;
  background-image: linear-gradient(to right, #22d3ee, #a855f7, #ec4899);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-align: left;
  margin: 2rem 0 3rem 0;
}

/* Increased map height to medium size */
.viz-map-area {
  height: 75vh;
  min-height: 550px;
  width: 100%;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--border-color);
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
}
.map-container { 
  height: 100%; 
  width: 100%; 
}

.viz-bottom-info {
  padding: 2rem 0;
  display: flex;
  flex-direction: column; /* Changed to column to stack route sequence and info-grids */
  align-items: flex-start; /* Align children to the start (left) */
  gap: 1.5rem;
  width: 100%;
}
.route-sequence h3 { 
  margin: 0 0 0.5rem 0; 
  font-size: 0.9rem; 
  font-weight: 500; 
  color: var(--secondary-text); 
}
.route-sequence p { 
  margin: 0; 
  font-size: 1.1rem; 
  font-weight: 500; 
  white-space: nowrap; 
  overflow-x: auto; 
  max-width: 100%; 
  padding-bottom: 5px; 
}
.info-grids { 
  display: flex; 
  gap: 1rem; 
  flex-wrap: wrap; 
  width: 100%; /* Ensure info-grids takes full width */
}
.info-grid { 
  background-color: var(--panel-bg); 
  border: 1px solid var(--border-color); 
  border-radius: 12px; 
  padding: 0.75rem 1rem; 
  text-align: left; 
  min-width: 180px; 
  flex: 1; /* Allow grids to grow and shrink */
  display: flex; 
  align-items: center; 
  gap: 1rem; 
  transition: background-color 0.3s, box-shadow 0.3s; 
}
.info-grid:hover { 
  background-color: rgba(58, 12, 163, 0.5); 
  box-shadow: 0 0 15px var(--border-color); 
}
.grid-icon svg { 
  color: var(--gradient-line); 
  width: 28px; 
  height: 28px; 
  flex-shrink: 0; 
}
.grid-text h4 { 
  margin: 0 0 0.25rem 0; 
  font-size: 0.8rem; 
  color: var(--secondary-text); 
  font-weight: 500; 
}
.grid-text p { 
  margin: 0; 
  font-size: 1.4rem; 
  font-weight: 700; 
  color: #fff; 
}

.sidebar-title { 
  font-size: 2.5rem; 
  font-weight: 700; 
  background-image: linear-gradient(to right, #22d3ee, #a855f7, #ec4899); 
  -webkit-background-clip: text; 
  background-clip: text; 
  color: transparent; 
  text-align: center; 
  margin: 0 0 2rem 0; 
  padding-bottom: 1rem; 
  border-bottom: 1px solid var(--border-color); 
}
.distance-list-vertical { 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
}
.step { 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  width: 100%; 
}
.step-location { 
  background-color: var(--panel-bg); 
  border: 1px solid var(--border-color); 
  border-radius: 8px; 
  padding: 0.75rem 1.5rem; 
  font-size: 1.2rem; 
  font-weight: 500; 
  width: 80%; 
  text-align: center; 
}
.step-connector { 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  padding: 0.5rem 0; 
  color: var(--secondary-text); 
}
.step-arrow { 
  font-size: 1.5rem; 
  line-height: 1; 
}
.step-distance { 
  font-size: 0.9rem; 
  font-weight: 700; 
  color: var(--gradient-line); 
  background: var(--bg-dark); 
  padding: 0.25rem 0.5rem; 
  border-radius: 4px; 
}

/* --- Button Positioning --- */
.back-button-pos { 
  position: absolute; 
  top: 20px; 
  left: 20px; 
  z-index: 1000; 
}

/* Adjusted to align the button to the left as seen in the video */
.analysis-button-container {
  width: 100%;
  display: flex;
  justify-content: flex-start; /* Changed from flex-end */
  margin-top: 2rem;
  padding-bottom: 2rem;
}

/* --- Unchanged Button and Animation CSS --- */
@keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.animated-button-wrapper { 
  position: relative; 
  display: inline-block; 
  border-radius: 1rem; 
  overflow: hidden; 
  transition: all 0.3s ease; 
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); 
}
.animated-button-wrapper:hover { 
  transform: scale(1.05); 
  box-shadow: 0 0 30px rgba(157, 78, 221, 0.8), 0 0 60px rgba(157, 78, 221, 0.5); 
}
.rotating-gradient-border { 
  position: absolute; 
  top: -3px; 
  left: -3px; 
  right: -3px; 
  bottom: -3px; 
  background: conic-gradient( 
    transparent 0deg, 
    transparent 240deg, 
    var(--gradient-line) 240deg, 
    var(--gradient-line) 290deg, 
    transparent 290deg, 
    transparent 360deg 
  ); 
  animation: spin-slow 10s linear infinite; 
  z-index: 0; 
  border-radius: 1rem; 
  opacity: 0; 
  transition: opacity 0.3s ease; 
  box-shadow: 0 0 15px rgba(199, 125, 255, 0.8), 0 0 30px rgba(199, 125, 255, 0.5); 
  filter: none; 
}
.animated-button-wrapper:hover .rotating-gradient-border { 
  opacity: 1; 
}
.button-inner-content { 
  position: relative; 
  background: var(--button-purple); 
  border-radius: 1rem; 
  padding: 1.5rem 3rem; 
  font-size: 1.5rem; 
  font-weight: bold; 
  color: white; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  gap: 0.75rem; 
  cursor: pointer; 
  z-index: 1; 
}
.leaflet-routing-container { display: none; }
.vehicle-icon svg { filter: drop-shadow(0 0 8px #fff) drop-shadow(0 0 3px #fff); animation: pulse 2s infinite; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

/* Responsive adjustments */
@media (max-width: 900px) {
  .viz-container { flex-direction: column; }
  .viz-main-content, .viz-sidebar {
    flex: unset;
    width: 100vw;
    height: 50vh;
    padding: 1rem;
  }
  .viz-sidebar {
    border-left: none;
    border-top: 1px solid var(--border-color);
  }
  .page-title {
    font-size: 2.5rem;
    margin: 1rem 0;
  }
  .info-grids {
    flex-direction: column;
  }
  .info-grid {
    min-width: unset;
    width: 100%;
  }
  .route-sequence p {
    font-size: 1rem;
  }
}
